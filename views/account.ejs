<%- include('partials/header') %>

<div class="container">
  <h2>ðŸ‘¤ Welcome, <%= user.name %></h2>
  <p><strong>Email:</strong> <%= user.email %></p>

  <h3 style="margin-top: 30px;">ðŸ“¦ Your Orders</h3>

  <% if (orders.length === 0) { %>
    <p>You haven't placed any orders yet.</p>
  <% } else { %>
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="background: #f5f5f5;">
          <th style="padding: 10px;">Order ID</th>
          <th style="padding: 10px;">Items</th>
          <th style="padding: 10px;">Total</th>
          <th style="padding: 10px;">Date</th>
        </tr>
      </thead>
      <tbody>
        <% orders.forEach(order => { %>
          <tr>
            <td style="padding: 10px;"><%= order._id %></td>
            <td style="padding: 10px;">
              <ul>
                <% order.items.forEach(i => { %>
                  <li><%= i.name %> x <%= i.qty %></li>
                <% }) %>
              </ul>
            </td>
            <td style="padding: 10px;">â‚¹<%= order.total %></td>
            <td style="padding: 10px;"><%= new Date(order.createdAt).toLocaleString() %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>

  <a class="btn" href="/auth/logout" style="margin-top: 20px; display: inline-block;">Logout</a>
</div>

<%- include('partials/footer') %>
